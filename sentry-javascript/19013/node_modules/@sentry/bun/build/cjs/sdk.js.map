{"version":3,"file":"sdk.js","sources":["../../src/sdk.ts"],"sourcesContent":["import * as os from 'node:os';\nimport type { Integration, Options } from '@sentry/core';\nimport {\n  applySdkMetadata,\n  functionToStringIntegration,\n  hasSpansEnabled,\n  inboundFiltersIntegration,\n  linkedErrorsIntegration,\n  requestDataIntegration,\n} from '@sentry/core';\nimport type { NodeClient } from '@sentry/node';\nimport {\n  consoleIntegration,\n  contextLinesIntegration,\n  getAutoPerformanceIntegrations,\n  httpIntegration,\n  init as initNode,\n  modulesIntegration,\n  nativeNodeFetchIntegration,\n  nodeContextIntegration,\n  onUncaughtExceptionIntegration,\n  onUnhandledRejectionIntegration,\n  processSessionIntegration,\n} from '@sentry/node';\nimport { bunServerIntegration } from './integrations/bunserver';\nimport { makeFetchTransport } from './transports';\nimport type { BunOptions } from './types';\n\n/** Get the default integrations for the Bun SDK. */\nexport function getDefaultIntegrations(_options: Options): Integration[] {\n  // We return a copy of the defaultIntegrations here to avoid mutating this\n  return [\n    // Common\n    // TODO(v11): Replace with eventFiltersIntegration once we remove the deprecated `inboundFiltersIntegration`\n    // eslint-disable-next-line deprecation/deprecation\n    inboundFiltersIntegration(),\n    functionToStringIntegration(),\n    linkedErrorsIntegration(),\n    requestDataIntegration(),\n    // Native Wrappers\n    consoleIntegration(),\n    httpIntegration(),\n    nativeNodeFetchIntegration(),\n    // Global Handlers\n    onUncaughtExceptionIntegration(),\n    onUnhandledRejectionIntegration(),\n    // Event Info\n    contextLinesIntegration(),\n    nodeContextIntegration(),\n    modulesIntegration(),\n    processSessionIntegration(),\n    // Bun Specific\n    bunServerIntegration(),\n    ...(hasSpansEnabled(_options) ? getAutoPerformanceIntegrations() : []),\n  ];\n}\n\n/**\n * The Sentry Bun SDK Client.\n *\n * To use this SDK, call the {@link init} function as early as possible in the\n * main entry module. To set context information or send manual events, use the\n * provided methods.\n *\n * @example\n * ```\n *\n * const { init } = require('@sentry/bun');\n *\n * init({\n *   dsn: '__DSN__',\n *   // ...\n * });\n * ```\n *\n * @example\n * ```\n *\n * const { addBreadcrumb } = require('@sentry/node');\n * addBreadcrumb({\n *   message: 'My Breadcrumb',\n *   // ...\n * });\n * ```\n *\n * @example\n * ```\n *\n * const Sentry = require('@sentry/node');\n * Sentry.captureMessage('Hello, world!');\n * Sentry.captureException(new Error('Good bye'));\n * Sentry.captureEvent({\n *   message: 'Manual',\n *   stacktrace: [\n *     // ...\n *   ],\n * });\n * ```\n *\n * @see {@link BunOptions} for documentation on configuration options.\n */\nexport function init(userOptions: BunOptions = {}): NodeClient | undefined {\n  applySdkMetadata(userOptions, 'bun');\n\n  const options = {\n    ...userOptions,\n    platform: 'javascript',\n    runtime: { name: 'bun', version: Bun.version },\n    serverName: userOptions.serverName || global.process.env.SENTRY_NAME || os.hostname(),\n  };\n\n  options.transport = options.transport || makeFetchTransport;\n\n  if (options.defaultIntegrations === undefined) {\n    options.defaultIntegrations = getDefaultIntegrations(options);\n  }\n\n  return initNode(options);\n}\n"],"names":["inboundFiltersIntegration","functionToStringIntegration","linkedErrorsIntegration","requestDataIntegration","consoleIntegration","httpIntegration","nativeNodeFetchIntegration","onUncaughtExceptionIntegration","onUnhandledRejectionIntegration","contextLinesIntegration","nodeContextIntegration","modulesIntegration","processSessionIntegration","bunServerIntegration","hasSpansEnabled","getAutoPerformanceIntegrations","applySdkMetadata","makeFetchTransport","initNode"],"mappings":";;;;;;;;AA4BA;AACO,SAAS,sBAAsB,CAAC,QAAQ,EAA0B;AACzE;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA,IAAIA,8BAAyB,EAAE;AAC/B,IAAIC,gCAA2B,EAAE;AACjC,IAAIC,4BAAuB,EAAE;AAC7B,IAAIC,2BAAsB,EAAE;AAC5B;AACA,IAAIC,uBAAkB,EAAE;AACxB,IAAIC,oBAAe,EAAE;AACrB,IAAIC,+BAA0B,EAAE;AAChC;AACA,IAAIC,mCAA8B,EAAE;AACpC,IAAIC,oCAA+B,EAAE;AACrC;AACA,IAAIC,4BAAuB,EAAE;AAC7B,IAAIC,2BAAsB,EAAE;AAC5B,IAAIC,uBAAkB,EAAE;AACxB,IAAIC,8BAAyB,EAAE;AAC/B;AACA,IAAIC,8BAAoB,EAAE;AAC1B,IAAI,IAAIC,oBAAe,CAAC,QAAQ,CAAA,GAAIC,mCAA8B,EAAC,GAAI,EAAE,CAAC;AAC1E,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAAS,IAAI,CAAC,WAAW,GAAe,EAAE,EAA0B;AAC3E,EAAEC,qBAAgB,CAAC,WAAW,EAAE,KAAK,CAAC;;AAEtC,EAAE,MAAM,UAAU;AAClB,IAAI,GAAG,WAAW;AAClB,IAAI,QAAQ,EAAE,YAAY;AAC1B,IAAI,OAAO,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,CAAC,OAAA,EAAS;AAClD,IAAI,UAAU,EAAE,WAAW,CAAC,UAAA,IAAc,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,WAAA,IAAe,EAAE,CAAC,QAAQ,EAAE;AACzF,GAAG;;AAEH,EAAE,OAAO,CAAC,SAAA,GAAY,OAAO,CAAC,SAAA,IAAaC,wBAAkB;;AAE7D,EAAE,IAAI,OAAO,CAAC,mBAAA,KAAwB,SAAS,EAAE;AACjD,IAAI,OAAO,CAAC,mBAAA,GAAsB,sBAAsB,CAAC,OAAO,CAAC;AACjE,EAAE;;AAEF,EAAE,OAAOC,SAAQ,CAAC,OAAO,CAAC;AAC1B;;;;;"}