{"version":3,"file":"index.js","sources":["../../../src/transports/index.ts"],"sourcesContent":["import type { BaseTransportOptions, Transport, TransportMakeRequestResponse, TransportRequest } from '@sentry/core';\nimport { createTransport, suppressTracing } from '@sentry/core';\n\n/**\n * Creates a Transport that uses the Fetch API to send events to Sentry.\n */\nexport function makeFetchTransport(options: BaseTransportOptions): Transport {\n  function makeRequest(request: TransportRequest): PromiseLike<TransportMakeRequestResponse> {\n    const requestOptions: RequestInit = {\n      body: request.body,\n      method: 'POST',\n      headers: options.headers,\n    };\n\n    try {\n      return suppressTracing(() => {\n        return fetch(options.url, requestOptions).then(response => {\n          return {\n            statusCode: response.status,\n            headers: {\n              'x-sentry-rate-limits': response.headers.get('X-Sentry-Rate-Limits'),\n              'retry-after': response.headers.get('Retry-After'),\n            },\n          };\n        });\n      });\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  }\n\n  return createTransport(options, makeRequest);\n}\n"],"names":["suppressTracing","createTransport"],"mappings":";;;;AAGA;AACA;AACA;AACO,SAAS,kBAAkB,CAAC,OAAO,EAAmC;AAC7E,EAAE,SAAS,WAAW,CAAC,OAAO,EAA+D;AAC7F,IAAI,MAAM,cAAc,GAAgB;AACxC,MAAM,IAAI,EAAE,OAAO,CAAC,IAAI;AACxB,MAAM,MAAM,EAAE,MAAM;AACpB,MAAM,OAAO,EAAE,OAAO,CAAC,OAAO;AAC9B,KAAK;;AAEL,IAAI,IAAI;AACR,MAAM,OAAOA,oBAAe,CAAC,MAAM;AACnC,QAAQ,OAAO,KAAK,CAAC,OAAO,CAAC,GAAG,EAAE,cAAc,CAAC,CAAC,IAAI,CAAC,YAAY;AACnE,UAAU,OAAO;AACjB,YAAY,UAAU,EAAE,QAAQ,CAAC,MAAM;AACvC,YAAY,OAAO,EAAE;AACrB,cAAc,sBAAsB,EAAE,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,sBAAsB,CAAC;AAClF,cAAc,aAAa,EAAE,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC;AAChE,aAAa;AACb,WAAW;AACX,QAAQ,CAAC,CAAC;AACV,MAAM,CAAC,CAAC;AACR,IAAI,CAAA,CAAE,OAAO,CAAC,EAAE;AAChB,MAAM,OAAO,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;AAC9B,IAAI;AACJ,EAAE;;AAEF,EAAE,OAAOC,oBAAe,CAAC,OAAO,EAAE,WAAW,CAAC;AAC9C;;;;"}